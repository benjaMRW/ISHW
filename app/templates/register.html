{% extends 'layout.html' %}
{% block title %}Register{% endblock %}
{% block content %}
<div class="registration-container">
  <form class="registration-form" method="POST" action="/register">
    <div class="form-group">
      <label for="student_number">Student Number:</label>
      <input type="number" id="student_number" name="student_number" placeholder="eg. 12345" required>
    </div>
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" placeholder="your_email@burnside.school.nz" required>
    </div>
    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" min="6" max="20" placeholder="min 6-max 20 Characters" required>
    </div>
    <div class="form-group">
      <label for="student_name">First Name:</label>
      <input type="text" id="student_name" name="student_name" required>
    </div>
    <div class="form-group">
      <label for="student_lastname">Last Name:</label>
      <input type="text" id="student_lastname" name="student_lastname" required>
    </div>
    <div class="form-group">
      <label for="is_tutor">
        <input type="checkbox" id="is_tutor" name="is_tutor" onchange="toggleTutorFields()"> Register as Tutor
      </label>
    </div>
    <div id="tutor_fields" style="display: none;">
      <div class="form-group">
        <label for="subjects">Subjects (comma-separated, e.g., Math,Physics):</label>
        <input type="text" id="subjects" name="subjects">
      </div>
      <div class="form-group">
        <label for="year">Academic Level (e.g., 1, 2, 3, 4):</label>
        <input type="number" id="year" name="year" min="1" max="4">
      </div>
    </div>
    <button type="submit" class="submit-btn">Register</button>
  </form>
  {% if alreadyexist %}
  <p class="message_error">This student number already exists.</p>
  {% endif %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <p class="message {{ category }}">{{ message }}</p>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>
<script>
  function toggleTutorFields() {
    const isTutor = document.getElementById('is_tutor').checked;
    document.getElementById('tutor_fields').style.display = isTutor ? 'block' : 'none';
  }


  document.getElementById('textInput').addEventListener('input', function () {
    this.value = this.value.replace(
      /([\u2700-\u27BF]|[\uE000-\uF8FF]|[\uD83C-\uDBFF\uDC00-\uDFFF])+/g,
      ''
    );
  });
</script>

{% endblock %}